name: app-with-checksums
namespace: test

image:
  repository: nginx
  tag: latest

workload:
  enabled: true
  type: deployment
  replicas: 1

service:
  enabled: true
  ports:
    - port: 80
      name: http

# ConfigMaps that will be created and should trigger restarts
configMaps:
  app-config:
    location: create
    contentType: yaml
    name: config.yml
    mountPath: /app/config
    content:
      database:
        host: postgres.local
        port: 5432
        db_name: myapp
      cache:
        host: redis.local
        port: 6379
        ttl: 300

  env-config:
    location: create
    contentType: env
    content:
      APP_NAME: test-app
      APP_VERSION: "1.0.0"
      LOG_LEVEL: debug

# Secrets that will be created and should trigger restarts
secrets:
  db-credentials:
    location: create
    contentType: env
    content:
      DB_USER: admin
      DB_PASSWORD: secret123

  tls-config:
    location: create
    contentType: file
    name: tls.pem
    mountPath: /app/tls
    content: |
      -----BEGIN CERTIFICATE-----
      MIIDXTCCAkWgAwIBAgIJAKLdQVPy90WjMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV
      -----END CERTIFICATE-----