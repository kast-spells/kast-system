# Deployment with Secret Volume Example
# Shows how to mount secrets as directories where each key becomes a file

workload:
  enabled: true
  type: deployment
  replicas: 1

service:
  enabled: true
  ports:
    - port: 80
      name: http

# Mount secrets as volumes - each key in the secret becomes a file
volumes:
  tls-certs:
    type: secret
    secretName: my-tls-secret
    destinationPath: /etc/tls
  api-keys:
    type: secret
    secretName: api-credentials
    destinationPath: /var/secrets
    defaultMode: 0400  # Optional: set file permissions
  selective-mount:
    type: secret
    secretName: app-config
    destinationPath: /etc/config
    items:
      - key: config.json
        path: application.json
      - key: database.yml
        path: db.yml
        mode: 0600

image:
  name: nginx
  tag: latest
