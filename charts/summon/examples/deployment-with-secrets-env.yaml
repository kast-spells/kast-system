# Example: Deployment with secrets in envFrom
# Shows how to include existing secrets as environment variables

name: app-with-secrets
namespace: test

image:
  repository: nginx
  tag: latest

workload:
  enabled: true
  type: deployment
  replicas: 1

service:
  enabled: true
  ports:
    - port: 80
      name: http

# Direct environment variables
envs:
  APP_ENV: production
  LOG_LEVEL: info
  SERVICE_NAME: app-with-secrets

# Secrets configuration
# These secrets already exist in the cluster (created by vault, crossplane, or manually)
secrets:
  # Secret that will be included in envFrom (all keys as env vars)
  api-credentials:
    type: env  # This makes summon include it in envFrom
    location: local  # Not creating, just referencing existing secret
  
  # Another secret for envFrom
  database-credentials:
    type: env
    location: local
  
  # Secret that won't be in envFrom (type is not "env")
  tls-certificates:
    type: file
    mountPath: /etc/tls
    location: local

  # Secret created by summon itself
  app-config:
    type: env
    location: create  # This one summon will create
    content: |
      CACHE_ENABLED=true
      CACHE_TTL=3600
      QUEUE_SIZE=100

serviceAccount:
  enabled: true