# Test example for vault random secret generation variants
# This validates random password generation with different configurations

lexicon:
  - chapter: base-system
    skipVerify: true
    type: vault
    url: http://vault.vault.svc:8200
    namespace: vault
    serviceAccount: vault
    authPath: k8s-path-auth
    secretPath: kv
    labels:
      default: book

glyphs:
  vault:
    # Test basic random password generation
    - type: secret
      name: basic-random-secret
      format: plain
      random: true
      keys:
        - username
      staticData:
        database: postgres

    # Test custom random key name
    - type: secret
      name: custom-random-key-secret
      format: plain
      randomKey: admin-password
      keys:
        - service-name
      staticData:
        environment: staging

    # Test random with env format (uppercase conversion)
    - type: secret
      name: random-env-format-secret
      format: env
      random: true
      keys:
        - database-host
        - database-port
      staticData:
        ssl-mode: require

    # Test custom random key with custom policy
    - type: secret
      name: complex-random-secret
      format: plain
      randomKey: complex-key
      passPolicyName: complex-password-policy
      keys:
        - app-id
      staticData:
        tier: premium

    # Test both random and randomKey (randomKey should take precedence)
    - type: secret
      name: dual-random-secret
      format: plain
      random: true
      randomKey: master-key
      keys:
        - client-id