# Test example for summon.serviceAccount glyph pattern
# This demonstrates creating ServiceAccounts through kaster's glyph orchestration
# instead of using the summon chart directly

spellbook:
  name: test-serviceaccount-glyph
chapter:
  name: testing

# Empty lexicon for this test (no runicIndexer needed)
lexicon: {}

glyphs:
  summon:
    # Basic ServiceAccount with minimal configuration
    basic-sa:
      type: serviceAccount
      enabled: true
      name: basic-service-account

    # ServiceAccount with custom labels and annotations
    custom-sa:
      type: serviceAccount
      enabled: true
      name: custom-service-account
      labels:
        team: platform
        environment: testing
        managed-by: kaster
      annotations:
        description: "Service account created via kaster glyph pattern"
        owner: "platform-team"

    # ServiceAccount with namespace override
    namespaced-sa:
      type: serviceAccount
      enabled: true
      name: namespaced-service-account
      namespace: custom-namespace
      labels:
        scope: namespace-specific

    # ServiceAccount with imagePullSecrets (string format)
    sa-with-pull-secret-string:
      type: serviceAccount
      enabled: true
      name: sa-with-pull-secret-string
      imagePullSecrets: "docker-registry-secret"

    # ServiceAccount with imagePullSecrets (list format)
    sa-with-pull-secrets-list:
      type: serviceAccount
      enabled: true
      name: sa-with-pull-secrets-list
      imagePullSecrets:
        - docker-registry-secret-1
        - docker-registry-secret-2
        - ghcr-secret

    # ServiceAccount with automountServiceAccountToken
    sa-with-automount:
      type: serviceAccount
      enabled: true
      name: sa-with-automount
      automountServiceAccountToken: true

    # ServiceAccount with secret reference
    sa-with-secret:
      type: serviceAccount
      enabled: true
      name: sa-with-secret
      secret: my-custom-secret
      labels:
        has-secret: "true"

    # Comprehensive ServiceAccount with all features
    comprehensive-sa:
      type: serviceAccount
      enabled: true
      name: comprehensive-service-account
      namespace: production
      labels:
        app: my-application
        component: backend
        tier: data
        environment: production
      annotations:
        kubectl.kubernetes.io/last-applied-configuration: "manual-override"
        iam.gke.io/gcp-service-account: "my-app@project.iam.gserviceaccount.com"
      imagePullSecrets:
        - gcr-secret
        - docker-hub-secret
      automountServiceAccountToken: true
      secret: vault-token-secret
